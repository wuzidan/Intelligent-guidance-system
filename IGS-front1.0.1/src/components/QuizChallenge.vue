<template>
    <div class="question-bank-page">
        <header class="header">
            <h1>È¢òÂ∫ì‰∏≠ÂøÉ</h1>
            <div class="user-info">
                <div class="avatar-container">
                    <div class="avatar avatar-default">
                        <span class="icon">üë®‚Äçüéì</span>
                    </div>
                    <div class="user-basic">
                        <h2>{{ userName }}</h2>
                        <p class="user-id">{{ studentId }}</p>
                    </div>
                </div>
                <button class="logout-btn" @click="logout">ÈÄÄÂá∫</button>
            </div>
        </header>

        <div class="dashboard">
            <!-- È¢òÂ∫ìÊÄª‰ΩìÊÉÖÂÜµÂç°Áâá -->
            <div class="card">
                <h3>È¢òÂ∫ìÊÄª‰ΩìÊÉÖÂÜµ</h3>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>Â∑≤ÂÆåÊàêÈ¢òÁõÆ</span>
                        <span>{{ completedCount }}/{{ totalCount }}</span>
                    </div>
                    <div class="progress-container">
                        <div
                            class="progress"
                            :style="{
                                width:
                                    (completedCount / totalCount) * 100 + '%',
                            }"
                            :class="
                                getProgressColorClass(
                                    (completedCount / totalCount) * 100
                                )
                            "
                        ></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>Âπ≥ÂùáÊ≠£Á°ÆÁéá</span>
                        <span>{{ avgAccuracy }}%</span>
                    </div>
                    <div class="progress-container">
                        <div
                            class="progress"
                            :style="{ width: avgAccuracy + '%' }"
                            :class="getProgressColorClass(avgAccuracy)"
                        ></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>ÊúÄËøëÊ≠£Á°ÆÁéá</span>
                        <span>{{ recentAccuracy }}%</span>
                    </div>
                    <div class="progress-container">
                        <div
                            class="progress"
                            :style="{ width: recentAccuracy + '%' }"
                            :class="getProgressColorClass(recentAccuracy)"
                        ></div>
                    </div>
                </div>
            </div>

            <!-- È¢òÁõÆÁ±ªÂûãÁªüËÆ°Âç°Áâá -->
            <div class="card">
                <h3>È¢òÁõÆÁ±ªÂûãÁªüËÆ°</h3>
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-value">{{
                            typeStats.singleChoice
                        }}</span>
                        <span class="stat-label">ÂçïÈÄâÈ¢ò</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{
                            typeStats.multipleChoice
                        }}</span>
                        <span class="stat-label">Â§öÈÄâÈ¢ò</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ typeStats.judgment }}</span>
                        <span class="stat-label">Âà§Êñ≠È¢ò</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{
                            typeStats.shortAnswer
                        }}</span>
                        <span class="stat-label">ÁÆÄÁ≠îÈ¢ò</span>
                    </div>
                </div>
            </div>

            <!-- ÈöæÂ∫¶ÂàÜÂ∏ÉÁªüËÆ° -->
            <div class="content-section">
                <h3>È¢òÁõÆÈöæÂ∫¶ÂàÜÂ∏É</h3>
                <div class="chart-table-wrapper">
                    <div class="chart-container">
                        <canvas id="difficultyChart"></canvas>
                    </div>
                    <div class="chart-table">
                        <div class="table-container">
                            <table class="styled-table">
                                <thead>
                                    <tr>
                                        <th>ÈöæÂ∫¶</th>
                                        <th>È¢òÁõÆÊï∞Èáè</th>
                                        <th>Âπ≥ÂùáÊ≠£Á°ÆÁéá</th>
                                        <th>Â∑≤ÂÆåÊàê</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="difficulty-row easy-row">
                                        <td>
                                            <span
                                                class="difficulty-badge difficulty-easy"
                                                >ÁÆÄÂçï</span
                                            >
                                        </td>
                                        <td>{{ difficultyStats.easy }}</td>
                                        <td>
                                            <div class="accuracy-indicator">
                                                <span class="accuracy-value"
                                                    >{{
                                                        difficultyAccuracy.easy
                                                    }}%</span
                                                >
                                                <div class="accuracy-bar">
                                                    <div
                                                        class="accuracy-fill"
                                                        :style="{
                                                            width:
                                                                difficultyAccuracy.easy +
                                                                '%',
                                                        }"
                                                    ></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            {{ completedDifficulty.easy }}È¢ò
                                        </td>
                                    </tr>
                                    <tr class="difficulty-row medium-row">
                                        <td>
                                            <span
                                                class="difficulty-badge difficulty-medium"
                                                >‰∏≠Á≠â</span
                                            >
                                        </td>
                                        <td>{{ difficultyStats.medium }}</td>
                                        <td>
                                            <div class="accuracy-indicator">
                                                <span class="accuracy-value"
                                                    >{{
                                                        difficultyAccuracy.medium
                                                    }}%</span
                                                >
                                                <div class="accuracy-bar">
                                                    <div
                                                        class="accuracy-fill"
                                                        :style="{
                                                            width:
                                                                difficultyAccuracy.medium +
                                                                '%',
                                                        }"
                                                    ></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            {{ completedDifficulty.medium }}È¢ò
                                        </td>
                                    </tr>
                                    <tr class="difficulty-row hard-row">
                                        <td>
                                            <span
                                                class="difficulty-badge difficulty-hard"
                                                >Âõ∞Èöæ</span
                                            >
                                        </td>
                                        <td>{{ difficultyStats.hard }}</td>
                                        <td>
                                            <div class="accuracy-indicator">
                                                <span class="accuracy-value"
                                                    >{{
                                                        difficultyAccuracy.hard
                                                    }}%</span
                                                >
                                                <div class="accuracy-bar">
                                                    <div
                                                        class="accuracy-fill"
                                                        :style="{
                                                            width:
                                                                difficultyAccuracy.hard +
                                                                '%',
                                                        }"
                                                    ></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            {{ completedDifficulty.hard }}È¢ò
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- È¢òÁõÆÂàóË°®Âå∫Âüü -->
            <div class="content-section">
                <div class="section-header">
                    <h3>È¢òÁõÆÂàóË°®</h3>
                    <div class="filter-controls">
                        <div class="filter-control">
                            <label for="type-filter" class="filter-label"
                                >È¢òÁõÆÁ±ªÂûãÔºö</label
                            >
                            <select
                                id="type-filter"
                                v-model="selectedType"
                                @change="filterQuestions"
                                class="type-select"
                            >
                                <option value="all">ÂÖ®ÈÉ®</option>
                                <option value="singleChoice">ÂçïÈÄâÈ¢ò</option>
                                <option value="multipleChoice">Â§öÈÄâÈ¢ò</option>
                                <option value="judgment">Âà§Êñ≠È¢ò</option>
                                <option value="shortAnswer">ÁÆÄÁ≠îÈ¢ò</option>
                            </select>
                        </div>
                        <div class="filter-control">
                            <label for="difficulty-filter" class="filter-label"
                                >ÈöæÂ∫¶Ôºö</label
                            >
                            <select
                                id="difficulty-filter"
                                v-model="selectedDifficulty"
                                @change="filterQuestions"
                                class="difficulty-select"
                            >
                                <option value="all">ÂÖ®ÈÉ®</option>
                                <option value="easy">ÁÆÄÂçï</option>
                                <option value="medium">‰∏≠Á≠â</option>
                                <option value="hard">Âõ∞Èöæ</option>
                            </select>
                        </div>
                        <div class="filter-control">
                            <label for="status-filter" class="filter-label"
                                >Áä∂ÊÄÅÔºö</label
                            >
                            <select
                                id="status-filter"
                                v-model="selectedStatus"
                                @change="filterQuestions"
                                class="status-select"
                            >
                                <option value="all">ÂÖ®ÈÉ®</option>
                                <option value="completed">Â∑≤ÂÆåÊàê</option>
                                <option value="uncompleted">Êú™ÂÆåÊàê</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="questions-container">
                    <div
                        class="question-card"
                        v-for="question in filteredQuestions"
                        :key="question.id"
                        @click="showQuestionDetail(question)"
                    >
                        <div class="question-header">
                            <div class="question-type" :class="question.type">
                                {{ getQuestionTypeText(question.type) }}
                            </div>

                            <div
                                class="question-difficulty"
                                :class="getDifficultyClass(question.difficulty)"
                            >
                                {{ getDifficultyText(question.difficulty) }}
                            </div>
                        </div>
                        <div class="question-content">
                            <p class="question-text">{{ question.content }}</p>
                            <div
                                v-if="question.completed"
                                class="question-status"
                            >
                                <span
                                    :class="
                                        question.correct
                                            ? 'status-correct'
                                            : 'status-incorrect'
                                    "
                                >
                                    {{
                                        question.correct
                                            ? "ÂõûÁ≠îÊ≠£Á°Æ‚úÖ"
                                            : "ÂõûÁ≠îÈîôËØØ‚ùå"
                                    }}
                                </span>
                                <span class="accuracy-badge"
                                    >Ê≠£Á°ÆÁéá: {{ question.accuracy }}%</span
                                >
                            </div>
                            <div
                                v-else
                                class="question-status status-uncompleted"
                            >
                                Êú™ÂÆåÊàêüîí
                            </div>
                        </div>
                    </div>
                    <div v-if="filteredQuestions.length === 0" class="no-data">
                        Ê≤°ÊúâÁ¨¶ÂêàÊù°‰ª∂ÁöÑÈ¢òÁõÆ
                    </div>
                </div>
            </div>
        </div>

        <!-- È¢òÁõÆËØ¶ÊÉÖÂºπÁ™ó -->
        <div class="modal" v-if="selectedQuestion">
            <div class="modal-content">
                <span class="close" @click="selectedQuestion = null"
                    >&times;</span
                >
                <div class="question-detail-header">
                    <h3>È¢òÁõÆËØ¶ÊÉÖ</h3>
                    <div class="question-meta">
                        <span class="meta-item">{{
                            getQuestionTypeText(selectedQuestion.type)
                        }}</span>
                        <span
                            class="meta-item"
                            :class="
                                getDifficultyClass(selectedQuestion.difficulty)
                            "
                        >
                            {{ getDifficultyText(selectedQuestion.difficulty) }}
                        </span>
                        <span class="meta-item"
                            >Ê≠£Á°ÆÁéá: {{ selectedQuestion.accuracy }}%</span
                        >
                    </div>
                </div>
                <div class="question-detail-content">
                    <p class="question-detail-text">
                        {{ selectedQuestion.content }}
                    </p>

                    <div
                        v-if="
                            ['singleChoice', 'multipleChoice'].includes(
                                selectedQuestion.type
                            )
                        "
                        class="question-options"
                    >
                        <h4>ÈÄâÈ°πÔºö</h4>
                        <ul>
                            <li
                                v-for="(
                                    option, index
                                ) in selectedQuestion.options"
                                :key="index"
                                class="option-item"
                            >
                                <span class="option-letter"
                                    >{{
                                        String.fromCharCode(65 + index)
                                    }}.</span
                                >
                                <span class="option-text">{{ option }}</span>
                                <span
                                    v-if="
                                        selectedQuestion.correctAnswer === index
                                    "
                                    class="correct-marker"
                                    >Ê≠£Á°ÆÁ≠îÊ°à</span
                                >
                            </li>
                        </ul>
                    </div>

                    <div
                        v-if="selectedQuestion.type === 'judgment'"
                        class="judgment-options"
                    >
                        <div
                            class="judgment-option"
                            :class="
                                selectedQuestion.correctAnswer === 0
                                    ? 'correct'
                                    : ''
                            "
                        >
                            Ê≠£Á°Æ
                        </div>
                        <div
                            class="judgment-option"
                            :class="
                                selectedQuestion.correctAnswer === 1
                                    ? 'correct'
                                    : ''
                            "
                        >
                            ÈîôËØØ
                        </div>
                    </div>

                    <div
                        v-if="selectedQuestion.type === 'shortAnswer'"
                        class="answer-section"
                    >
                        <h4>ÂèÇËÄÉÁ≠îÊ°àÔºö</h4>
                        <p class="reference-answer">
                            {{ selectedQuestion.referenceAnswer }}
                        </p>
                    </div>

                    <div
                        v-if="selectedQuestion.analysis"
                        class="question-analysis"
                    >
                        <h4>Ëß£ÊûêÔºö</h4>
                        <p>{{ selectedQuestion.analysis }}</p>
                    </div>
                </div>

                <div
                    v-if="selectedQuestion.completed"
                    class="your-answer-section"
                >
                    <h4>‰Ω†ÁöÑÁ≠îÊ°àÔºö</h4>
                    <p
                        class="your-answer"
                        :class="
                            selectedQuestion.correct ? 'correct' : 'incorrect'
                        "
                    >
                        {{ getYourAnswerText(selectedQuestion) }}
                    </p>
                </div>

                <div class="question-actions">
                    <button class="action-btn review-btn">Âä†ÂÖ•ÈîôÈ¢òÊú¨</button>
                    <button class="action-btn practice-btn">ÈáçÊñ∞ÁªÉ‰π†</button>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, onMounted, nextTick, computed } from "vue";
import Chart from "chart.js/auto";

// Áî®Êà∑‰ø°ÊÅØ
const userName = ref("ÊùéÂõõ");
const studentId = ref("20230002");

// ÊÄª‰ΩìÊï∞ÊçÆ
const totalCount = ref(120);
const completedCount = ref(45);
const avgAccuracy = ref(72);
const recentAccuracy = ref(85);

// È¢òÁõÆÂàóË°®
const questionList = ref([
    {
        id: 1,
        content: "‰∏ãÂàóÂì™È°π‰∏çÂ±û‰∫éJavaScriptÁöÑÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºü",
        type: "singleChoice",
        difficulty: "easy",
        options: ["String", "Number", "Array", "Boolean"],
        correctAnswer: 2,
        accuracy: 89,
        completed: true,
        correct: true,
        userAnswer: 2,
        analysis:
            "JavaScriptÁöÑÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂåÖÊã¨ÔºöString„ÄÅNumber„ÄÅBoolean„ÄÅNull„ÄÅUndefined„ÄÅSymbolÂíåBigInt„ÄÇArrayÂ±û‰∫éÂºïÁî®Êï∞ÊçÆÁ±ªÂûã„ÄÇ",
    },
    {
        id: 2,
        content: "‰ª•‰∏ãÂì™‰∫õÊñπÊ≥ïÂèØ‰ª•Áî®‰∫éÊï∞ÁªÑÈÅçÂéÜÔºü",
        type: "multipleChoice",
        difficulty: "medium",
        options: ["forEach()", "map()", "filter()", "sort()"],
        correctAnswer: [0, 1, 2],
        accuracy: 65,
        completed: true,
        correct: false,
        userAnswer: [0, 1],
        analysis:
            "forEach()„ÄÅmap()„ÄÅfilter()ÈÉΩÊòØÊï∞ÁªÑÈÅçÂéÜÊñπÊ≥ïÔºåËÄåsort()Áî®‰∫éÊï∞ÁªÑÊéíÂ∫èÔºå‰∏çÊòØÈÅçÂéÜÊñπÊ≥ï„ÄÇ",
    },
    {
        id: 3,
        content: "JavaScript‰∏≠ÁöÑÈó≠ÂåÖÂèØ‰ª•ËÆøÈóÆÂ§ñÈÉ®ÂáΩÊï∞ÁöÑÂèòÈáè„ÄÇ",
        type: "judgment",
        difficulty: "easy",
        correctAnswer: 0,
        accuracy: 78,
        completed: false,
        correct: null,
        userAnswer: null,
    },
    {
        id: 4,
        content: "ËØ∑Ëß£Èáä‰ªÄ‰πàÊòØ‰∫ã‰ª∂ÂÜíÊ≥°ÂèäÂÖ∂Âú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÁöÑÂ∫îÁî®Âú∫ÊôØ„ÄÇ",
        type: "shortAnswer",
        difficulty: "hard",
        referenceAnswer:
            "‰∫ã‰ª∂ÂÜíÊ≥°ÊòØDOM‰∫ã‰ª∂‰º†Êí≠ÁöÑ‰∏ÄÁßçÊú∫Âà∂ÔºåÂΩì‰∏Ä‰∏™ÂÖÉÁ¥†Ëß¶Âèë‰∫ã‰ª∂ÂêéÔºå‰∫ã‰ª∂‰ºöÈÄêÁ∫ßÂêë‰∏ä‰º†Êí≠Âà∞ÂÖ∂Áà∂ÂÖÉÁ¥†ÔºåÁõ¥Âà∞documentÂØπË±°„ÄÇÂÆûÈôÖÂºÄÂèë‰∏≠ÂèØ‰ª•Âà©Áî®‰∫ã‰ª∂ÂÜíÊ≥°ÂÆûÁé∞‰∫ã‰ª∂ÂßîÊâòÔºåÂ∞Ü‰∫ã‰ª∂Â§ÑÁêÜÂô®ÁªëÂÆöÂà∞Áà∂ÂÖÉÁ¥†‰∏äÔºåÁªü‰∏ÄÂ§ÑÁêÜÂ≠êÂÖÉÁ¥†ÁöÑ‰∫ã‰ª∂ÔºåÊèêÈ´òÊÄßËÉΩÂπ∂ÁÆÄÂåñ‰ª£Á†Å„ÄÇ",
        accuracy: 42,
        completed: true,
        correct: true,
        userAnswer:
            "‰∫ã‰ª∂ÂÜíÊ≥°ÊòØÊåá‰∫ã‰ª∂‰ªéËß¶ÂèëÂÖÉÁ¥†Âêë‰∏ä‰º†Êí≠Âà∞Áà∂ÂÖÉÁ¥†ÁöÑËøáÁ®ãÔºåÂèØ‰ª•Áî®‰∫é‰∫ã‰ª∂ÂßîÊâò„ÄÇ",
    },
    {
        id: 5,
        content: "PromiseÂØπË±°ÊúâÂì™‰∫õÁä∂ÊÄÅÔºü",
        type: "multipleChoice",
        difficulty: "medium",
        options: ["pending", "fulfilled", "rejected", "resolved"],
        correctAnswer: [0, 1, 2],
        accuracy: 58,
        completed: false,
        correct: null,
        userAnswer: null,
        analysis:
            "PromiseÂØπË±°Êúâ‰∏âÁßçÁä∂ÊÄÅÔºöpendingÔºàËøõË°å‰∏≠Ôºâ„ÄÅfulfilledÔºàÂ∑≤ÊàêÂäüÔºâÂíårejectedÔºàÂ∑≤Â§±Ë¥•Ôºâ„ÄÇresolvedÈÄöÂ∏∏ÊåáÁä∂ÊÄÅÂ∑≤Á°ÆÂÆöÔºàÂèØËÉΩÊòØfulfilledÊàñrejectedÔºâÔºå‰∏çÊòØ‰∏ÄÁßçÁã¨Á´ãÁä∂ÊÄÅ„ÄÇ",
    },
    {
        id: 6,
        content: "async/awaitÊòØES6ÂºïÂÖ•ÁöÑÂºÇÊ≠•ÁºñÁ®ãËØ≠Ê≥ï„ÄÇ",
        type: "judgment",
        difficulty: "medium",
        correctAnswer: 1,
        accuracy: 62,
        completed: true,
        correct: true,
        userAnswer: 1,
        analysis: "async/awaitÊòØES2017ÔºàES8ÔºâÂºïÂÖ•ÁöÑÂºÇÊ≠•ÁºñÁ®ãËØ≠Ê≥ïÔºå‰∏çÊòØES6„ÄÇ",
    },
    {
        id: 7,
        content: "‰ªÄ‰πàÊòØÂéüÂûãÈìæÔºüËØ∑ÁÆÄËø∞ÂÖ∂Âú®JavaScript‰∏≠ÁöÑ‰ΩúÁî®„ÄÇ",
        type: "shortAnswer",
        difficulty: "hard",
        referenceAnswer:
            "ÂéüÂûãÈìæÊòØJavaScriptÂÆûÁé∞ÁªßÊâøÁöÑ‰∏ªË¶ÅÊñπÂºè„ÄÇÊØè‰∏™ÂØπË±°ÈÉΩÊúâ‰∏Ä‰∏™ÂéüÂûãÂØπË±°ÔºåÂéüÂûãÂØπË±°Êú¨Ë∫´‰πüÊòØÂØπË±°ÔºåÂõ†Ê≠§‰πüÊúâËá™Â∑±ÁöÑÂéüÂûãÔºåÂΩ¢Êàê‰∏Ä‰∏™ÈìæÂºèÁªìÊûÑÔºåÂç≥ÂéüÂûãÈìæ„ÄÇÂΩìËÆøÈóÆ‰∏Ä‰∏™ÂØπË±°ÁöÑÂ±ûÊÄßÊó∂ÔºåÂ¶ÇÊûúËØ•ÂØπË±°Êú¨Ë∫´Ê≤°ÊúâËøô‰∏™Â±ûÊÄßÔºåJavaScript‰ºöÊ≤øÁùÄÂéüÂûãÈìæÂêë‰∏äÊü•ÊâæÔºåÁõ¥Âà∞ÊâæÂà∞ËØ•Â±ûÊÄßÊàñÂà∞ËææÂéüÂûãÈìæÁöÑÊú´Á´ØÔºànullÔºâ„ÄÇÂéüÂûãÈìæÁöÑ‰ΩúÁî®ÊòØÂÆûÁé∞ÂØπË±°‰πãÈó¥ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÂÖ±‰∫´Ôºå‰ªéËÄåÂÆûÁé∞ÁªßÊâø„ÄÇ",
        accuracy: 35,
        completed: false,
        correct: null,
        userAnswer: null,
    },
    {
        id: 8,
        content:
            "ËØ∑Ëß£ÈáäJavaScript‰∏≠ÁöÑ‰∫ã‰ª∂ÂßîÊâòÂÜíÊ≥°Êú∫Âà∂ÔºåÂπ∂ËØ¥ÊòéÂ¶Ç‰ΩïÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°„ÄÇ",
        type: "shortAnswer",
        difficulty: "medium",
        referenceAnswer:
            "‰∫ã‰ª∂ÂÜíÊ≥°ÊòØÊåáÂΩì‰∏Ä‰∏™ÂÖÉÁ¥†Ëß¶Âèë‰∫ã‰ª∂ÂêéÔºå‰∫ã‰ª∂‰ºö‰ªéËß¶ÂèëÂÖÉÁ¥†Âêë‰∏ä‰º†Êí≠Âà∞ÂÖ∂Áà∂ÂÖÉÁ¥†ÔºåÁõ¥Ëá≥‰º†Êí≠Âà∞documentÂØπË±°ÁöÑËøáÁ®ã„ÄÇËøôÁßçÊú∫Âà∂ÂÖÅËÆ∏Áà∂ÂÖÉÁ¥†ÊçïËé∑Ëé∑Âπ∂Â§ÑÁêÜÂ≠êÂÖÉÁ¥†Ëß¶ÂèëÁöÑ‰∫ã‰ª∂„ÄÇË¶ÅÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°ÔºåÂèØ‰ª•‰ΩøÁî®event.stopPropagation()ÊñπÊ≥ïÔºõËã•Ë¶ÅÂêåÊó∂ÈòªÊ≠¢‰∫ã‰ª∂ÁöÑÈªòËÆ§Ë°å‰∏∫ÔºåÂèØ‰ΩøÁî®event.preventDefault()ÊàñÂú®‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞‰∏≠ËøîÂõûfalse„ÄÇ",
        accuracy: 58,
        completed: true,
        correct: false,
        userAnswer:
            "‰∫ã‰ª∂ÂÜíÊ≥°ÊòØ‰∫ã‰ª∂‰ªéÂ≠êÂÖÉÁ¥†‰º†Âà∞Áà∂ÂÖÉÁ¥†ÔºåÂèØ‰ª•Áî®stopPropagationÈòªÊ≠¢„ÄÇ",
    },
    {
        id: 9,
        content: "‰ªÄ‰πàÊòØÈó≠ÂåÖÔºüÈó≠ÂåÖÊúâÂì™‰∫õÂÖ∏ÂûãÂ∫îÁî®Âú∫ÊôØÔºü",
        type: "shortAnswer",
        difficulty: "hard",
        referenceAnswer:
            "Èó≠ÂåÖÊòØÊåáÊúâÊùÉËÆøÈóÆÂè¶‰∏Ä‰∏™ÂáΩÊï∞‰ΩúÁî®Âüü‰∏≠ÂèòÈáèÁöÑÂáΩÊï∞ÔºåÈÄöÂ∏∏Âú®ÂµåÂ•óÂáΩÊï∞‰∏≠ÂΩ¢Êàê„ÄÇÂΩìÂÜÖÈÉ®ÂáΩÊï∞ÂºïÁî®‰∫ÜÂ§ñÈÉ®ÂáΩÊï∞ÁöÑÂèòÈáèÔºå‰∏îÂÜÖÈÉ®ÂáΩÊï∞Âú®Â§ñÈÉ®ÂáΩÊï∞ÊâßË°åÂêéË¢´ËøîÂõûÊàñ‰øùÂ≠òÊó∂ÔºåÂ∞±‰ºöÂΩ¢ÊàêÈó≠ÂåÖÔºåËøô‰∫õÂèòÈáè‰ºöË¢´‰øùÁïôÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇÂÖ∏ÂûãÂ∫îÁî®Âú∫ÊôØÂåÖÊã¨ÔºöÂàõÂª∫ÁßÅÊúâÂèòÈáè„ÄÅÂÆûÁé∞Ê®°ÂùóÂåñ„ÄÅÂª∂ËøüÊâßË°åÔºàÂ¶ÇÂÆöÊó∂Âô®Ôºâ„ÄÅÊüØÈáåÂåñÂáΩÊï∞‰ª•ÂèäReact‰∏≠ÁöÑÈí©Â≠êÂáΩÊï∞Á≠â„ÄÇ",
        accuracy: 42,
        completed: false,
        correct: null,
        userAnswer: null,
    },
    {
        id: 10,
        content: "ËØ∑ÁÆÄËø∞JavaScript‰∏≠thisÂÖ≥ÈîÆÂ≠óÁöÑÊåáÂêëËßÑÂàô„ÄÇ",
        type: "shortAnswer",
        difficulty: "medium",
        referenceAnswer:
            "JavaScript‰∏≠thisÁöÑÊåáÂêëÂèñÂÜ≥‰∫éÂáΩÊï∞ÁöÑË∞ÉÁî®ÊñπÂºèÔºö1. ÊôÆÈÄöÂáΩÊï∞Ë∞ÉÁî®Êó∂ÔºåthisÊåáÂêëÂÖ®Â±ÄÂØπË±°ÔºàÊµèËßàÂô®‰∏≠‰∏∫windowÔºåNode.js‰∏≠‰∏∫globalÔºâÔºõ2. ‰Ωú‰∏∫ÂØπË±°ÊñπÊ≥ïË∞ÉÁî®Êó∂ÔºåthisÊåáÂêëË∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÂØπË±°Ôºõ3. ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®Êó∂ÔºåthisÊåáÂêëÊñ∞ÂàõÂª∫ÁöÑÂÆû‰æãÂØπË±°Ôºõ4. ‰ΩøÁî®apply„ÄÅcall„ÄÅbindÊñπÊ≥ïË∞ÉÁî®Êó∂ÔºåthisÊåáÂêëËøô‰∫õÊñπÊ≥ïÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Ôºõ5. ÁÆ≠Â§¥ÂáΩÊï∞‰∏≠ÔºåthisÊåáÂêëÂÆö‰πâÊó∂ÊâÄÂú®ÁöÑ‰∏ä‰∏ãÊñáÔºåËÄåÈùûË∞ÉÁî®Êó∂ÁöÑÂØπË±°Ôºå‰∏îÊó†Ê≥ïË¢´ÊîπÂèò„ÄÇ",
        accuracy: 51,
        completed: true,
        correct: true,
        userAnswer:
            "thisÊåáÂêëÂèñÂÜ≥‰∫éË∞ÉÁî®ÊñπÂºèÔºöÊôÆÈÄöÂáΩÊï∞ÊåáÂêëÂÖ®Â±ÄÔºåÂØπË±°ÊñπÊ≥ïÊåáÂêëÂØπË±°ÔºåÊûÑÈÄ†ÂáΩÊï∞ÊåáÂêëÂÆû‰æãÔºåapply/call/bindÂèØ‰ª•ÊîπÂèòÊåáÂêëÔºåÁÆ≠Â§¥ÂáΩÊï∞ÊåáÂêëÂÆö‰πâÊó∂ÁöÑ‰∏ä‰∏ãÊñá„ÄÇ",
    },
]);

// Á≠õÈÄâÁõ∏ÂÖ≥ÂèòÈáè
const selectedType = ref("all");
const selectedDifficulty = ref("all");
const selectedStatus = ref("all");

// Á≠õÈÄâÈ¢òÁõÆ
const filteredQuestions = computed(() => {
    return questionList.value.filter((question) => {
        // Á±ªÂûãÁ≠õÈÄâ
        if (
            selectedType.value !== "all" &&
            question.type !== selectedType.value
        ) {
            return false;
        }
        // ÈöæÂ∫¶Á≠õÈÄâ
        if (
            selectedDifficulty.value !== "all" &&
            question.difficulty !== selectedDifficulty.value
        ) {
            return false;
        }
        // Áä∂ÊÄÅÁ≠õÈÄâ
        if (selectedStatus.value === "completed" && !question.completed) {
            return false;
        }
        if (selectedStatus.value === "uncompleted" && question.completed) {
            return false;
        }
        return true;
    });
});

// ÁªüËÆ°È¢òÁõÆÁ±ªÂûãÊï∞Èáè
const typeStats = computed(() => ({
    singleChoice: questionList.value.filter((q) => q.type === "singleChoice")
        .length,
    multipleChoice: questionList.value.filter(
        (q) => q.type === "multipleChoice"
    ).length,
    judgment: questionList.value.filter((q) => q.type === "judgment").length,
    shortAnswer: questionList.value.filter((q) => q.type === "shortAnswer")
        .length,
}));

// ÁªüËÆ°ÈöæÂ∫¶ÂàÜÂ∏É
const difficultyStats = computed(() => ({
    easy: questionList.value.filter((q) => q.difficulty === "easy").length,
    medium: questionList.value.filter((q) => q.difficulty === "medium").length,
    hard: questionList.value.filter((q) => q.difficulty === "hard").length,
}));

// ÂêÑÈöæÂ∫¶Ê≠£Á°ÆÁéá
const difficultyAccuracy = computed(() => ({
    easy: calculateAvgAccuracy("easy"),
    medium: calculateAvgAccuracy("medium"),
    hard: calculateAvgAccuracy("hard"),
}));

// ËÆ°ÁÆóÂêÑÈöæÂ∫¶Âπ≥ÂùáÊ≠£Á°ÆÁéá
const calculateAvgAccuracy = (difficulty) => {
    const questions = questionList.value.filter(
        (q) => q.difficulty === difficulty
    );
    if (questions.length === 0) return 0;
    const totalAccuracy = questions.reduce((sum, q) => sum + q.accuracy, 0);
    return Math.round(totalAccuracy / questions.length);
};

// Â∑≤ÂÆåÊàêÂêÑÈöæÂ∫¶È¢òÁõÆÊï∞Èáè
const completedDifficulty = computed(() => ({
    easy: questionList.value.filter(
        (q) => q.difficulty === "easy" && q.completed
    ).length,
    medium: questionList.value.filter(
        (q) => q.difficulty === "medium" && q.completed
    ).length,
    hard: questionList.value.filter(
        (q) => q.difficulty === "hard" && q.completed
    ).length,
}));

// ÈÄâ‰∏≠ÁöÑÈ¢òÁõÆ
const selectedQuestion = ref(null);

// ÂõæË°®ÂÆû‰æã
let difficultyChartInstance = null;

// Ê†πÊçÆËøõÂ∫¶Ëé∑ÂèñÈ¢úËâ≤Á±ª
const getProgressColorClass = (progress) => {
    if (progress < 50) return "progress-low";
    if (progress < 75) return "progress-medium";
    return "progress-high";
};

// Ëé∑ÂèñÈ¢òÁõÆÁ±ªÂûãÊñáÊú¨
const getQuestionTypeText = (type) => {
    const types = {
        singleChoice: "ÂçïÈÄâÈ¢ò",
        multipleChoice: "Â§öÈÄâÈ¢ò",
        judgment: "Âà§Êñ≠È¢ò",
        shortAnswer: "ÁÆÄÁ≠îÈ¢ò",
    };
    return types[type] || "Êú™Áü•Á±ªÂûã";
};

// Ëé∑ÂèñÈöæÂ∫¶ÊñáÊú¨
const getDifficultyText = (difficulty) => {
    const difficulties = {
        easy: "ÁÆÄÂçï",
        medium: "‰∏≠Á≠â",
        hard: "Âõ∞Èöæ",
    };
    return difficulties[difficulty] || "Êú™Áü•ÈöæÂ∫¶";
};

// Ëé∑ÂèñÈöæÂ∫¶Ê†∑ÂºèÁ±ª
const getDifficultyClass = (difficulty) => {
    const classes = {
        easy: "difficulty-easy",
        medium: "difficulty-medium",
        hard: "difficulty-hard",
    };
    return classes[difficulty] || "";
};

// Ëé∑ÂèñÁî®Êà∑Á≠îÊ°àÊñáÊú¨
const getYourAnswerText = (question) => {
    if (question.type === "singleChoice" || question.type === "judgment") {
        if (question.type === "judgment") {
            return question.userAnswer === 0 ? "Ê≠£Á°Æ" : "ÈîôËØØ";
        }
        return (
            String.fromCharCode(65 + question.userAnswer) +
            "." +
            question.options[question.userAnswer]
        );
    } else if (question.type === "multipleChoice") {
        return question.userAnswer
            .map(
                (index) =>
                    String.fromCharCode(65 + index) +
                    "." +
                    question.options[index]
            )
            .join("Ôºå");
    } else if (question.type === "shortAnswer") {
        return question.userAnswer || "Êú™Â°´ÂÜô";
    }
    return "Êó†Á≠îÊ°à";
};

// ÊòæÁ§∫È¢òÁõÆËØ¶ÊÉÖ
const showQuestionDetail = (question) => {
    selectedQuestion.value = question;
};

// Á≠õÈÄâÈ¢òÁõÆ
const filterQuestions = () => {
    // Á≠õÈÄâÈÄªËæëÁî±computedÂ±ûÊÄßÂ§ÑÁêÜ
};

// Ê∏≤ÊüìÈöæÂ∫¶ÂàÜÂ∏ÉÂõæË°®
const renderDifficultyChart = () => {
    const ctx = document.getElementById("difficultyChart");
    if (!ctx) return;

    if (difficultyChartInstance) {
        difficultyChartInstance.destroy();
    }

    const colors = {
        easy: {
            background: "rgba(46, 204, 113, 0.7)",
            border: "rgba(46, 204, 113, 1)",
            hover: "rgba(46, 204, 113, 0.9)",
        },
        medium: {
            background: "rgba(234, 179, 8, 0.7)",
            border: "rgba(234, 179, 8, 1)",
            hover: "rgba(234, 179, 8, 0.9)",
        },
        hard: {
            background: "rgba(239, 68, 68, 0.7)",
            border: "rgba(239, 68, 68, 1)",
            hover: "rgba(239, 68, 68, 0.9)",
        },
    };

    difficultyChartInstance = new Chart(ctx, {
        type: "doughnut",
        data: {
            labels: ["ÁÆÄÂçï", "‰∏≠Á≠â", "Âõ∞Èöæ"],
            datasets: [
                {
                    data: [
                        difficultyStats.value.easy,
                        difficultyStats.value.medium,
                        difficultyStats.value.hard,
                    ],
                    backgroundColor: [
                        colors.easy.background,
                        colors.medium.background,
                        colors.hard.background,
                    ],
                    borderColor: [
                        colors.easy.border,
                        colors.medium.border,
                        colors.hard.border,
                    ],
                    borderWidth: 2,
                    borderRadius: 8, // Â¢ûÂ§ßÂúÜËßí
                    hoverOffset: 20, // Â¢ûÂ§ßÊÇ¨ÂÅúÂÅèÁßª
                    hoverBackgroundColor: [
                        colors.easy.hover,
                        colors.medium.hover,
                        colors.hard.hover,
                    ],
                },
            ],
        },
        options: {
            animation: {
                animateRotate: true,
                animateScale: true,
                duration: 1500,
                easing: "easeOutQuart",
            },
            layout: {
                padding: {
                    top: 20, // Â¢ûÂä†È°∂ÈÉ®ÂÜÖËæπË∑ù
                    right: 20,
                    bottom: 40,
                    left: 20,
                },
            },
            cutout: "50%", // ÂÖ≥ÈîÆË∞ÉÊï¥ÔºöÂáèÂ∞è‰∏≠Èó¥Á©∫ÁôΩÔºåËÆ©ÂúÜÁéØÊõ¥ÂÆΩÔºàÈªòËÆ§ÊòØ70%Ôºâ
            plugins: {
                title: {
                    display: true,
                    text: "È¢òÁõÆÈöæÂ∫¶ÂàÜÂ∏É",
                    font: {
                        size: 18,
                        weight: "bold",
                        family: "'Arial', sans-serif",
                    },
                    color: "#2c3e50",
                    padding: {
                        bottom: 20,
                    },
                },
                legend: {
                    position: "bottom",
                    labels: {
                        font: {
                            size: 14,
                            family: "'Arial', sans-serif",
                        },
                        color: "#34495e",
                        padding: 25, // Â¢ûÂä†Âõæ‰æãÈó¥Ë∑ù
                        usePointStyle: true,
                        pointStyle: "circle",
                        font: {
                            weight: "500",
                        },
                    },
                },
                tooltip: {
                    backgroundColor: "rgba(255, 255, 255, 0.95)",
                    titleColor: "#2c3e50",
                    bodyColor: "#34495e",
                    borderColor: "#e1e4e8",
                    borderWidth: 1,
                    padding: 12,
                    boxPadding: 6,
                    usePointStyle: true,
                    callbacks: {
                        label: function (context) {
                            const label = context.label || "";
                            const value = context.raw || 0;
                            const total = context.dataset.data.reduce(
                                (a, b) => a + b,
                                0
                            );
                            const percentage = Math.round(
                                (value / total) * 100
                            );
                            return `${label}: ${value} È¢ò (${percentage}%)`;
                        },
                    },
                    boxShadow: "0 4px 6px rgba(0, 0, 0, 0.1)",
                    animationDuration: 300,
                },
            },
            interaction: {
                mode: "nearest",
                intersect: false,
                axis: "x",
            },
            responsive: true,
            maintainAspectRatio: false,
        },
    });
};

// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñÂõæË°®
onMounted(() => {
    renderDifficultyChart();
});

// ÈÄÄÂá∫ÂäüËÉΩ
const logout = () => {
    alert("ÊÇ®Â∑≤ÈÄÄÂá∫Á≥ªÁªü");
};
</script>

<style scoped>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Arial", sans-serif;
}

.question-bank-page {
    width: 100%;
    height: 100%;
    padding: 20px;
    background-color: #f4f7f9;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 18px 24px; /* Ë∞ÉÊï¥ÂÜÖËæπË∑ùÔºå‰∏ä‰∏ãÁ®çÁ™ÑÂ∑¶Âè≥Á®çÂÆΩ */
    border-bottom: 2px solid transparent;
    border-image: linear-gradient(90deg, #3498db, #9b59b6) 1; /* Ê∏êÂèòËâ≤‰∏ãËæπÊ°Ü */
    background: linear-gradient(
        135deg,
        #ffffff 0%,
        #f8fafc 100%
    ); /* ÂæÆÂ¶ôÁöÑÊ∏êÂèòËÉåÊôØ */
    border-radius: 12px; /* Â¢ûÂ§ßÂúÜËßíÔºåÊõ¥ÊüîÂíå */
    box-shadow: 0 4px 20px rgba(52, 152, 219, 0.08); /* ÊµÖËìùËâ≤Ë∞ÉÈò¥ÂΩ±Ôºå‰∏é‰∏ªÈ¢òÂëºÂ∫î */
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Áªü‰∏ÄÂä®ÁîªÊõ≤Á∫ø */
}

/* È°∂ÈÉ®È´òÂÖâË£ÖÈ•∞ */
.header::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, #3498db, #9b59b6, #3498db);
    background-size: 200% 100%;
    animation: headerGlow 6s ease-in-out infinite; /* Ê∏êÂèòÂÖâÊµÅÂä®Áîª */
}

/* Ê†áÈ¢òÊñáÂ≠óÊ†∑Âºè‰ºòÂåñ */
.header h1 {
    margin: 0;
    font-size: 30px;
    font-weight: 600;
    background: linear-gradient(90deg, #2c3e50, #34495e);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    position: relative;
    padding-left: 12px;
    transition: transform 0.3s ease;
}

/* Ê†áÈ¢òÂ∑¶‰æßÂ∞èË£ÖÈ•∞ */
.header h1::before {
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 60%;
    border-radius: 2px;
    background: linear-gradient(180deg, #3498db, #9b59b6);
}

/* Áî®Êà∑‰ø°ÊÅØÂå∫ÂüüÂä®Áîª */
.user-info {
    display: flex;
    align-items: center;
    transition: transform 0.3s ease;
}

/* ÈÄÄÂá∫ÊåâÈíÆÁæéÂåñ */
.logout-btn {
    margin-left: 15px;
    padding: 9px 18px;
    background: linear-gradient(90deg, #3498db, #2980b9);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
}

/* ÊåâÈíÆÊÇ¨ÂÅúÊïàÊûú */
.logout-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
    background: linear-gradient(90deg, #2980b9, #3498db);
}

/* ÊåâÈíÆÁÇπÂáªÊ≥¢Á∫πÊïàÊûú */
.logout-btn::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120px;
    height: 120px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    transition: transform 0.6s ease;
}

.logout-btn:active::after {
    transform: translate(-50%, -50%) scale(1);
}

/* Êï¥‰ΩìÊÇ¨ÂÅúÂä®Áîª */
.header:hover {
    box-shadow: 0 6px 25px rgba(52, 152, 219, 0.12);
    transform: translateY(-2px);
}

.header:hover h1 {
    transform: translateX(5px);
}

.header:hover .user-info {
    transform: translateX(-5px);
}

/* È°∂ÈÉ®Ê∏êÂèòÂÖâÊµÅÂä®Áîª */
@keyframes headerGlow {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

.user-info {
    font-size: 15px;
    display: flex;
    align-items: center;
}

.logout-btn {
    margin-left: 15px;
    padding: 8px 15px;
    background-color: #e74c3c;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

.dashboard {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    width: 100%;
}

.card {
    background: linear-gradient(145deg, #ffffff 0%, #f0f7ff 100%);
    border-radius: 10px;
    padding: 22px;
    box-shadow: 0 3px 12px rgba(59, 130, 246, 0.08);
    border: 1px solid rgba(240, 249, 255, 0.8);
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);
}

/* Â∑¶‰æßËìùËâ≤Ê∏êÂèòË£ÖÈ•∞Êù° */
.card::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 4px;
    background: linear-gradient(180deg, #60a5fa 0%, #2563eb 100%);
    transform: scaleY(0.8);
    opacity: 0.7;
    transition: all 0.4s ease;
}

/* È°∂ÈÉ®Ê®™ÂêëÊ∏êÂèòÂÖâÊù° */
.card::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(59, 130, 246, 0.25),
        transparent
    );
    transform: translateX(-100%);
    transition: transform 0.7s ease-in-out;
}

.card h3 {
    margin-bottom: 18px;
    color: #1e3a8a;
    font-size: 18px;
    font-weight: 600;
    padding-bottom: 8px;
    border-bottom: 1px dashed rgba(59, 130, 246, 0.2);
    position: relative;
    display: inline-block;
    transition: color 0.3s ease;
}

/* Ê†áÈ¢òÂâçËìùËâ≤Ë£ÖÈ•∞ÂõæÊ†á */
.card h3::before {
    content: "‚ñ∑";
    display: inline-block;
    margin-right: 8px;
    font-size: 14px;
    color: #3b82f6;
    vertical-align: middle;
    transform: scale(0.9) translateX(-2px);
    transition: transform 0.3s ease;
}

/* ÊÇ¨ÂÅúÂä®ÁîªÊïàÊûú */
.card:hover {
    transform: translateY(-5px) scale(1.01);
    box-shadow: 0 10px 25px rgba(59, 130, 246, 0.15);
    border-color: rgba(191, 219, 254, 0.8);
}

.card:hover::before {
    transform: scaleY(1);
    opacity: 1;
}

.card:hover::after {
    transform: translateX(100%);
}

.card:hover h3 {
    color: #2563eb;
}

.card:hover h3::before {
    transform: scale(1.2) translateX(0) rotate(90deg);
    color: #2563eb;
}

/* Âç°ÁâáÂÜÖÂÖÉÁ¥†Âª∂ËøüÂä®Áîª */
.card .progress-item,
.card .stat-item {
    transition: transform 0.3s ease, opacity 0.3s ease;
    opacity: 0.9;
}

.card:hover .progress-item,
.card:hover .stat-item {
    transform: translateX(3px);
    opacity: 1;
}

/* Â≠êÂÖÉÁ¥†‰æùÊ¨°Âä®Áîª */
.card:hover .progress-item:nth-child(2),
.card:hover .stat-item:nth-child(2) {
    transition-delay: 0.1s;
}

.card:hover .progress-item:nth-child(3),
.card:hover .stat-item:nth-child(3) {
    transition-delay: 0.2s;
}

.stats {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 10px;
}

.stat-item {
    text-align: center;
    min-width: 80px;
}

.stat-value {
    display: block;
    font-size: 24px;
    font-weight: bold;
    color: #3498db;
}

.stat-label {
    color: #7f8c8d;
    font-size: 14px;
}

.content-section {
    grid-column: 1 / -1; /* ËÆ©ÂÜÖÂÆπÂå∫ÂüüÊ®™Ë∑®ÊâÄÊúâÂàó */
}

.chart-table-wrapper {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.chart-container {
    flex: 1;
    min-width: 300px;
    position: relative;
    height: 300px;
}

.chart-table {
    flex: 1;
    min-width: 300px;
    overflow-x: auto;
}

/* Ë°®Ê†ºÁæéÂåñÊ†∑Âºè */
.table-container {
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    border: 1px solid #f0f0f0;
}

.styled-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
    background-color: #fff;
}

.styled-table thead {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
}

.styled-table th {
    padding: 14px 12px;
    text-align: left;
    font-weight: 600;
    color: #334155;
    border-bottom: 1px solid #e2e8f0;
    position: relative;
}

.styled-table th::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(
        90deg,
        rgba(46, 204, 113, 0) 0%,
        rgba(46, 204, 113, 1) 50%,
        rgba(46, 204, 113, 0) 100%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
}

.styled-table th:hover::after {
    opacity: 1;
}

.styled-table td {
    padding: 14px 12px;
    border-bottom: 1px solid #f1f5f9;
    vertical-align: middle;
}

.styled-table .difficulty-row:last-child td {
    border-bottom: none;
}

.styled-table .difficulty-row:hover {
    background-color: #f8fafc;
    transform: translateX(4px);
    transition: all 0.2s ease;
}

.difficulty-badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
}

.accuracy-indicator {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.accuracy-value {
    font-weight: 500;
    color: #1e293b;
}

.accuracy-bar {
    height: 6px;
    width: 100%;
    background-color: #f1f5f9;
    border-radius: 3px;
    overflow: hidden;
}

.accuracy-fill {
    height: 100%;
    transition: width 1s ease;
}

/* Ë°åÂíåËøõÂ∫¶Êù°È¢úËâ≤Âå∫ÂàÜ */
.easy-row .accuracy-fill {
    background: linear-gradient(90deg, #4ade80 0%, #10b981 100%);
}

.medium-row .accuracy-fill {
    background: linear-gradient(90deg, #facc15 0%, #f59e0b 100%);
}

.hard-row .accuracy-fill {
    background: linear-gradient(90deg, #f87171 0%, #ef4444 100%);
}

/* Âü∫Á°ÄË°®Ê†ºÊ†∑ÂºèÔºàÂÖ∂‰ªñË°®Ê†ºÁî®Ôºâ */
table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

th,
td {
    padding: 10px 8px;
    text-align: left;
    border-bottom: 1px solid #f0f0f0;
}

th {
    background-color: #f9f9f9;
    font-weight: bold;
}

tr:hover {
    background-color: #f5f5f5;
}

.progress-item {
    margin-bottom: 15px;
}

.progress-label {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
    font-size: 14px;
}

.progress-container {
    width: 100%;
    height: 10px;
    background-color: #f0f0f0;
    border-radius: 5px;
    overflow: hidden;
}

.progress {
    height: 100%;
    transition: width 0.3s ease;
    border-radius: 5px;
}

/* ËøõÂ∫¶Êù°È¢úËâ≤ */
.progress-low {
    background: linear-gradient(90deg, #c0392b 0%, #e74c3c 100%);
}

.progress-medium {
    background: linear-gradient(90deg, #d35400 0%, #f39c12 50%, #f1c40f 100%);
}

.progress-high {
    background: linear-gradient(90deg, #1e7e34 0%, #2ecc71 50%, #81c784 100%);
}

/* È¢òÁõÆÂàóË°®Ê†∑Âºè */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    flex-wrap: wrap;
    gap: 10px;
}

.filter-controls {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.filter-control {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 5px 10px;
    background-color: #f8fafc;
    border-radius: 6px;
}

.filter-label {
    font-size: 14px;
    color: #334155;
}

.filter-control select {
    padding: 6px 25px 6px 10px;
    border-radius: 4px;
    border: 1px solid #e2e8f0;
    background-color: #fff;
    font-size: 14px;
    color: #1e293b;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    cursor: pointer;
}

.questions-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.question-card {
    background-color: white;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    border: 1px solid #eee;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    display: flex;
    flex-direction: column;
}

.question-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.question-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-size: 13px;
}

.question-type {
    padding: 3px 8px;
    border-radius: 4px;
}

/* ÂçïÈÄâÈ¢ò - ËìùÁ¥´Ëâ≤Ë∞É */
.question-type.singleChoice {
    background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
    color: #6a1b9a;
}

/* Â§öÈÄâÈ¢ò - ÈùõËìùËâ≤Ë∞É */
.question-type.multipleChoice {
    background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
    color: #00838f;
}

/* Âà§Êñ≠È¢ò - ËìùÁ¥´Ëâ≤Ë∞É */
.question-type.judgment {
    background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
    color: #2c6ecb;
}

/* ÁÆÄÁ≠îÈ¢ò - Ê∑±Á¥´Ëâ≤Ë∞É */
.question-type.shortAnswer {
    background: linear-gradient(135deg, #ede7f6 0%, #d1c4e9 100%);
    color: #4527a0;
}

.question-difficulty {
    padding: 3px 8px;
    border-radius: 4px;
    font-weight: 500;
}

.difficulty-easy {
    background: linear-gradient(135deg, #e8f5e9 0%, #dcedc8 100%);
    color: #2e7d32;
}

.difficulty-medium {
    background: linear-gradient(135deg, #fff8e1 0%, #ffe082 100%);
    color: #f57c00;
}

.difficulty-hard {
    background: linear-gradient(135deg, #ffebee 0%, #ef9a9a 100%);
    color: #b71c1c;
}
.question-content {
    flex: 1;
}

.question-text {
    margin: 0 0 10px 0;
    color: #263238;
    font-size: 14px;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.question-status {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    margin-top: auto;
    padding-top: 10px;
    border-top: 1px dashed #eee;
}

.status-correct {
    color: #43a047;
    font-weight: 500;
}

.status-incorrect {
    color: #e53935;
    font-weight: 500;
}

.status-uncompleted {
    color: #78909c;
    padding-top: 10px;
    border-top: 1px dashed #eee;
    font-size: 13px;
}

.accuracy-badge {
    color: #607d8b;
    background-color: #f5f5f5;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 12px;
}

/* È¢òÁõÆËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: white;
    padding: 25px;
    border-radius: 8px;
    width: 90%;
    max-width: 800px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
}

.close {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 24px;
    cursor: pointer;
    color: #7f8c8d;
}

.question-detail-header {
    margin-bottom: 20px;
}

.question-meta {
    display: flex;
    gap: 10px;
    margin-top: 10px;
    flex-wrap: wrap;
}

.meta-item {
    font-size: 14px;
    padding: 4px 10px;
    border-radius: 4px;
}

.question-detail-content {
    margin-bottom: 20px;
}

.question-detail-text {
    font-size: 16px;
    line-height: 1.6;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
}

.question-options {
    margin-bottom: 20px;
}

.question-options h4,
.answer-section h4,
.question-analysis h4,
.your-answer-section h4 {
    margin-bottom: 10px;
    color: #37474f;
    font-size: 15px;
}

.option-item {
    list-style: none;
    margin-bottom: 10px;
    padding: 8px 10px;
    border-radius: 4px;
    transition: background-color 0.2s;
    display: flex;
    align-items: flex-start;
}

.option-item:hover {
    background-color: #f5f5f5;
}

.option-letter {
    font-weight: bold;
    margin-right: 10px;
    min-width: 20px;
}

.correct-marker {
    margin-left: auto;
    background-color: #e8f5e9;
    color: #2e7d32;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.judgment-options {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.judgment-option {
    flex: 1;
    padding: 15px;
    text-align: center;
    border-radius: 6px;
    border: 1px solid #ddd;
    cursor: default;
}

.judgment-option.correct {
    background-color: #e8f5e9;
    border-color: #a5d6a7;
    color: #2e7d32;
    font-weight: bold;
}

.reference-answer {
    padding: 10px 15px;
    background-color: #f5f5f5;
    border-radius: 4px;
    line-height: 1.6;
}

.question-analysis {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #eee;
}

.question-analysis p {
    line-height: 1.6;
    color: #546e7a;
}

.your-answer-section {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #eee;
}

.your-answer {
    padding: 10px 15px;
    border-radius: 4px;
    line-height: 1.6;
}

.your-answer.correct {
    background-color: #e8f5e9;
    border: 1px solid #a5d6a7;
    color: #2e7d32;
}

.your-answer.incorrect {
    background-color: #ffebee;
    border: 1px solid #ef9a9a;
    color: #c62828;
}

.question-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #eee;
}

.action-btn {
    padding: 8px 16px;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.2s;
}

.review-btn {
    background-color: #f39c12;
    color: white;
}

.review-btn:hover {
    background-color: #e67e22;
}

.practice-btn {
    background-color: #3498db;
    color: white;
}

.practice-btn:hover {
    background-color: #2980b9;
}

.no-data {
    text-align: center;
    color: #888;
    padding: 40px 20px;
    font-style: italic;
    grid-column: 1 / -1;
}

.avatar-container {
    display: flex;
    align-items: center;
}

.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    margin-right: 10px;
}

.avatar-default {
    background-color: #3498db;
    color: white;
}

.user-basic h2 {
    font-size: 16px;
    margin: 0;
    color: #2c3e50;
}

.user-id {
    font-size: 12px;
    color: #7f8c8d;
    margin: 0;
}

@media (max-width: 768px) {
    .dashboard {
        grid-template-columns: 1fr;
    }

    .chart-table-wrapper {
        flex-direction: column;
    }

    .questions-container {
        grid-template-columns: 1fr;
    }
}

.stat-value {
    display: block;
    font-size: 28px;
    font-weight: 700;
    color: #2c3e50;
    position: relative;
    padding: 8px 0;
    letter-spacing: -0.5px;
    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: transform 0.3s ease;
}

.stat-item:hover .stat-value {
    transform: scale(1.05);
}

.stat-value::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #3498db 0%, #2ecc71 100%);
    transition: width 0.3s ease;
}

.stat-item:hover .stat-value::after {
    width: 60%;
}
</style>
